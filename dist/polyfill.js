window.MediaRecorder=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(){importScripts("https://cdnjs.cloudflare.com/ajax/libs/lamejs/1.2.0/lame.min.js");var e;function t(t){var n=[];t=function(e){for(var t=new Float32Array(e),n=t.length,r=new Int16Array(n),a=0;a<n;a++){var i=Math.max(-1,Math.min(1,t[a]));r[a]=i*(i<0?32768:32767)}return r}(t);for(var r=0,a=t.length;r<a;r+=1152){var i=e.encodeBuffer(t.subarray(r,r+1152));i.length&&n.push(new Int8Array(i))}return n}var n=[function(t){e=new lamejs.Mp3Encoder(1,t||44100,128)},function(e){postMessage([0,t(e)])},function(){var t=[],n=e.flush();n.length&&t.push(new Int8Array(n)),postMessage([1,t])}];onmessage=function(e){var t=e.data;n[t[0]](t[1])}};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i,o,s=window.AudioContext||window.webkitAudioContext;var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n,a,i=this;i.state="inactive",i.stream=t,i._em=document.createDocumentFragment(),i._encoder=(n=r.toString().match(/^[\s\S]*?\{([\s\S]+)\}/)[1],a=new Blob([n]),new Worker(URL.createObjectURL(a))),i._encoder.onmessage=function(e){var t=e.data;i._data.push(new Blob(t[1])),t[0]&&(i._raiseDataAvailable(),i._raise("stop"))};var o={};["start","stop","pause","resume","dataavailable","error"].forEach((function(e){Object.defineProperty(i,"on"+e,{get:function(){return o[e]},set:function(t){o[e]&&(i._em.removeEventListener(e,o[e]),delete o[e]),t&&(o[e]=t,i._em.addEventListener(e,t))}})}))}var t,n,u;return t=e,(n=[{key:"start",value:function(e){var t=this;"inactive"===t.state?(t.state="recording",t._tl=t.stream.getTracks()[0].addEventListener("ended",(function(){"inactive"!==t.state&&t.stop()})),i||(i=new s),o||(o=i.createScriptProcessor(0,1,1)),t._input=i.createMediaStreamSource(t.stream),t._data=[],t._encoder.postMessage([0,i.sampleRate]),o.onaudioprocess=function(e){if("recording"===t.state){var n=e.inputBuffer.getChannelData(0).buffer;t._encoder.postMessage([1,n],[n])}},t._input.connect(o),o.connect(i.destination),t._raise("start"),e&&(t._slicing=setInterval((function(){"recording"===t.state&&t._raiseDataAvailable()}),e))):t._raiseError()}},{key:"stop",value:function(){var e=this;"inactive"!==e.state?(e.state="inactive",e._input.disconnect(),e._slicing&&(clearInterval(e._slicing),delete e._slicing),e.stream.removeEventListener("ended",e._tl),e._encoder.postMessage([2])):e._raiseError()}},{key:"pause",value:function(){var e=this;"inactive"!==e.state?(e.state="paused",e._raise("pause")):e._raiseError()}},{key:"resume",value:function(){var e=this;"inactive"!==e.state?(e.state="recording",e._raise("resume")):e._raiseError()}},{key:"requestData",value:function(){var e=this;"recording"===e.state?e._raiseDataAvailable():e._raiseError()}},{key:"addEventListener",value:function(){var e;(e=this._em).addEventListener.apply(e,arguments)}},{key:"removeEventListener",value:function(){var e;(e=this._em).removeEventListener.apply(e,arguments)}},{key:"dispatchEvent",value:function(){var e;return(e=this._em).dispatchEvent.apply(e,arguments)}},{key:"_raiseDataAvailable",value:function(){var e=this,t=new Event("dataavailable");t.data=new Blob(e._data,{type:e.mimeType}),e._data=[],e._em.dispatchEvent(t)}},{key:"_raiseError",value:function(e){var t=new Event("error");t.error={name:e||"InvalidStateError"},this._em.dispatchEvent(t)}},{key:"_raise",value:function(e){this._em.dispatchEvent(new Event(e))}},{key:"mimeType",get:function(){return"audio/mpeg"}}])&&a(t.prototype,n),u&&a(t,u),e}();u.isTypeSupported=function(e){return"audio/mpeg"===e},u.notSupported=!navigator.mediaDevices||!s;t.default=u}]).default;