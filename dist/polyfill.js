window.MediaRecorder=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=function(){importScripts("https://cdnjs.cloudflare.com/ajax/libs/lamejs/1.2.0/lame.min.js");var e;function t(t){var r=[];t=function(e){for(var t=new Float32Array(e),r=t.length,n=new Int16Array(r),a=0;a<r;a++){var i=Math.max(-1,Math.min(1,t[a]));n[a]=i*(i<0?32768:32767)}return n}(t);for(var n=0,a=t.length;n<a;n+=1152){var i=e.encodeBuffer(t.subarray(n,n+1152));i.length&&r.push(new Int8Array(i))}return r}var r=[function(t){e=new lamejs.Mp3Encoder(1,t||44100,128)},function(e){postMessage([0,t(e)])},function(){var t=[],r=e.flush();r.length&&t.push(new Int8Array(r)),postMessage([1,t])}];onmessage=function(e){var t=e.data;r[t[0]](t[1])}};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i,o,s=window.AudioContext||window.webkitAudioContext;var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r,a,i=this;i.state="inactive",i.stream=t,i._em=document.createDocumentFragment(),i._wo=(r=n.toString().match(/^[\s\S]*?\{([\s\S]+)\}/)[1],a=new Blob([r]),new Worker(URL.createObjectURL(a))),i._wo.onmessage=function(e){var t=e.data;i._da.push(new Blob(t[1])),t[0]&&(i._raiseDataAvailable(),i._raise("stop"))};var o={};["start","stop","pause","resume","dataavailable","error"].forEach((function(e){Object.defineProperty(i,"on"+e,{get:function(){return o[e]},set:function(t){o[e]&&(i._em.removeEventListener(e,o[e]),delete o[e]),t&&(o[e]=t,i._em.addEventListener(e,t))}})}))}var t,r,u;return t=e,(r=[{key:"start",value:function(e){var t=this;if("inactive"!==t.state)return t._raiseError();t.state="recording";var r=function(){"inactive"!==t.state&&t.stop()};t._li=r,t.stream.getTracks()[0].addEventListener("ended",r),i||(i=new s),o||(o=i.createScriptProcessor(0,1,1)),t._in=i.createMediaStreamSource(t.stream),t._da=[],t._wo.postMessage([0,i.sampleRate]),o.onaudioprocess=function(e){if("recording"===t.state){var r=e.inputBuffer.getChannelData(0).buffer;t._wo.postMessage([1,r],[r])}},t._in.connect(o),o.connect(i.destination),t._raise("start"),e&&(t._si=setInterval((function(){"recording"===t.state&&t._raiseDataAvailable()}),e))}},{key:"stop",value:function(){var e=this;if("inactive"===e.state)return e._raiseError();e.state="inactive",e._in.disconnect(),e._si&&(clearInterval(e._si),e._si=null),e.stream.removeEventListener("ended",e._li),e._wo.postMessage([2])}},{key:"pause",value:function(){var e=this;if("inactive"===e.state)return e._raiseError();e.state="paused",e._raise("pause")}},{key:"resume",value:function(){var e=this;if("inactive"===e.state)return e._raiseError();e.state="recording",e._raise("resume")}},{key:"requestData",value:function(){var e=this;if("recording"!==e.state)return e._raiseError();e._raiseDataAvailable()}},{key:"addEventListener",value:function(){var e;(e=this._em).addEventListener.apply(e,arguments)}},{key:"removeEventListener",value:function(){var e;(e=this._em).removeEventListener.apply(e,arguments)}},{key:"dispatchEvent",value:function(){var e;return(e=this._em).dispatchEvent.apply(e,arguments)}},{key:"_raiseDataAvailable",value:function(){var e=this,t=new Event("dataavailable");t.data=new Blob(e._da,{type:e.mimeType}),e._da=[],e._em.dispatchEvent(t)}},{key:"_raiseError",value:function(e){var t=new Event("error");t.error={name:e||"InvalidStateError"},this._em.dispatchEvent(t)}},{key:"_raise",value:function(e){this._em.dispatchEvent(new Event(e))}},{key:"mimeType",get:function(){return"audio/mpeg"}}])&&a(t.prototype,r),u&&a(t,u),e}();u.isTypeSupported=function(e){return"audio/mpeg"===e},u.notSupported=!navigator.mediaDevices||!s;t.default=u}]).default;